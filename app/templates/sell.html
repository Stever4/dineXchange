{% include 'header.html' %}
<div style="text-align: center;" class="row">
	<h1 id="location"></h1>
	<p>
	<a class="btn btn-xlg btn-primary" onclick='return checkIn()'>Check In</a>
	<script type='text/javascript'>
	indow.onload = waitForMatch();
	function checkIn()
	{
	var el = document.getElementById('dropdown');
    var location = el.options[el.selectedIndex].innerHTML;
    var myRootRef = new Firebase('https://dxc.firebaseio.com/sell/' + '{{user}}');
	myRootRef.child('location').set(location);
	myRootRef.child('time').set(new Date().getTime());
	document.getElementById("location").innerHTML = "Currently @ " + location;
	}

	function checkOut()
	{
	var el = document.getElementById('dropdown');
    var location = el.options[el.selectedIndex].innerHTML;
	var myRootRef = new Firebase('https://dxc.firebaseio.com/sell/' + '{{user}}');
	myRootRef.child('location').set(null);
	myRootRef.child('time').set(null);
	document.getElementById("location").innerHTML = "";
	}
	function waitForMatch()
	{
	var otherRootRef = new Firebase('https://dxc.firebaseio.com/bargains/'+ '{{user}}');
    otherRootRef.on('value', function(dataSnapshot)
    	{
    		alert("hi");
    		if (dataSnapshot.hasChild('room')){
    			alert("hi");
    			var room = dataSnapshot.child('room');
    			room = room.val();
                window.location = "/bargain?room="+room;
        	}
    	})
	}
</script>



    </p>
    <p>
	<select class="form-control" id="dropdown">
  <option>Entropy</option>
  <option>Skibo</option>
  <option>Resnik</option>
  <option>Asiana</option>
  <option>The Exchange</option>
</select>
	</p>
	<p>
<a class="btn btn-xlg btn-primary" onclick='return checkOut()'>Check Out</a>
	</p>
</div>
{% include 'footer.html' %}
